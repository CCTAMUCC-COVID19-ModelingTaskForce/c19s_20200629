{"ast":null,"code":"import _pt from \"prop-types\";\nimport _isEmpty from \"lodash/isEmpty\";\n\nvar _jsxFileName = \"/home/ekrell/Documents/Work/repos/COVID19/c19s_20200629/covid19_scenarios/src/components/Main/Mitigation/MitigationIntervalComponent.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { FastField, useField } from 'formik';\nimport { useTranslation } from 'react-i18next';\nimport { FaTrash } from 'react-icons/fa';\nimport { Button } from 'reactstrap';\nimport { getFormikErrors } from '../../../helpers/getFormikErrors';\nimport { RangeSpinBox } from '../../Form/RangeSpinBox';\nimport { MitigationDatePicker } from './MitigationDatePicker';\n\nconst mapStateToProps = state => ({});\n\nconst mapDispatchToProps = {};\nexport const MitigationIntervalComponent = connect(mapStateToProps, mapDispatchToProps)(MitigationIntervalComponentDisconnected);\nexport function MitigationIntervalComponentDisconnected({\n  interval,\n  index,\n  onRemove\n}) {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const [, {\n    error: errors,\n    touched\n  }] = useField(`mitigation.mitigationIntervals[${index}]`);\n  const errorMessages = [{\n    friendlyName: t('Intervention name'),\n    identifier: `name`\n  }, {\n    friendlyName: t('Transmission reduction'),\n    identifier: `transmissionReduction`\n  }, {\n    friendlyName: t('Date range'),\n    identifier: `timeRange`\n  }].map(({\n    friendlyName,\n    identifier\n  }) => {\n    const errorMessages = getFormikErrors({\n      identifier,\n      errors,\n      touched\n    });\n    return {\n      friendlyName,\n      identifier,\n      errorMessages\n    };\n  }).filter(({\n    errorMessages\n  }) => !_isEmpty(errorMessages));\n  const errorComponents = errorMessages.map(({\n    friendlyName,\n    errorMessages\n  }) => errorMessages.map(message => {\n    const content = `${friendlyName}: ${message}`;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: content,\n      className: \"my-0 text-right text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, content);\n  }));\n  const nameHasError = errorMessages.some(({\n    identifier\n  }) => identifier === 'name');\n  const transmissionReductionHasError = errorMessages.some(({\n    identifier\n  }) => identifier === 'transmissionReduction');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item-datum mitigation-item-name-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: `mitigation.mitigationIntervals[${index}].name`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, t(`Name`))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FastField, {\n    className: `form-control ${nameHasError ? 'border-danger' : ''}`,\n    id: `mitigation.mitigationIntervals[${index}].name`,\n    name: `mitigation.mitigationIntervals[${index}].name`,\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item-datum mitigation-item-time-range-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: `mitigation.mitigationIntervals[${index}].timeRange`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, t(`Date range`))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MitigationDatePicker, {\n    identifier: `mitigation.mitigationIntervals[${index}].timeRange`,\n    value: interval.timeRange,\n    allowPast: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item-datum mitigation-item-efficiency-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: `mitigation.mitigationIntervals[${index}].transmissionReduction`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, t(`Transmission reduction`))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(RangeSpinBox, {\n    identifier: `mitigation.mitigationIntervals[${index}].transmissionReduction`,\n    step: 0.1,\n    min: 0,\n    max: 100,\n    hasError: transmissionReductionHasError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mitigation-item-datum mitigation-item-controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: `mitigation-interval-${index}-btn-remove`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, t('Remove'))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"mitigation-item-btn-remove\",\n    type: \"button\",\n    id: `mitigation-interval-${index}-btn-remove`,\n    onClick: onRemove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaTrash, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, errorComponents));\n}\n\n_s(MitigationIntervalComponentDisconnected, \"k9uFpps3J9EMEMTJuSmPlNq/G0Q=\", false, function () {\n  return [useTranslation, useField];\n});\n\n_c = MitigationIntervalComponentDisconnected;\nMitigationIntervalComponentDisconnected.propTypes = {\n  index: _pt.number.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"MitigationIntervalComponentDisconnected\");","map":{"version":3,"sources":["/home/ekrell/Documents/Work/repos/COVID19/c19s_20200629/covid19_scenarios/src/components/Main/Mitigation/MitigationIntervalComponent.tsx"],"names":["React","connect","FastField","useField","useTranslation","FaTrash","Button","getFormikErrors","RangeSpinBox","MitigationDatePicker","mapStateToProps","state","mapDispatchToProps","MitigationIntervalComponent","MitigationIntervalComponentDisconnected","interval","index","onRemove","t","error","errors","touched","errorMessages","friendlyName","identifier","map","filter","errorComponents","message","content","nameHasError","some","transmissionReductionHasError","timeRange"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport { connect } from 'react-redux'\nimport { FastField, useField } from 'formik'\nimport { isEmpty } from 'lodash'\nimport { useTranslation } from 'react-i18next'\nimport { FaTrash } from 'react-icons/fa'\nimport { Button } from 'reactstrap'\n\nimport { MitigationInterval } from '../../../algorithms/types/restricted/ScenarioDatum'\nimport { getFormikErrors } from '../../../helpers/getFormikErrors'\n\nimport { State } from '../../../state/reducer'\n\nimport { RangeSpinBox } from '../../Form/RangeSpinBox'\nimport { MitigationDatePicker } from './MitigationDatePicker'\n\nexport interface MitigationIntervalProps {\n  interval: MitigationInterval\n  index: number\n  onRemove(): void\n}\n\nconst mapStateToProps = (state: State) => ({})\n\nconst mapDispatchToProps = {}\n\nexport const MitigationIntervalComponent = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(MitigationIntervalComponentDisconnected)\n\nexport function MitigationIntervalComponentDisconnected({ interval, index, onRemove }: MitigationIntervalProps) {\n  const { t } = useTranslation()\n  const [, { error: errors, touched }] = useField(`mitigation.mitigationIntervals[${index}]`)\n\n  const errorMessages = [\n    { friendlyName: t('Intervention name'), identifier: `name` },\n    { friendlyName: t('Transmission reduction'), identifier: `transmissionReduction` },\n    { friendlyName: t('Date range'), identifier: `timeRange` },\n  ]\n    .map(({ friendlyName, identifier }) => {\n      const errorMessages = getFormikErrors({ identifier, errors, touched })\n      return { friendlyName, identifier, errorMessages }\n    })\n    .filter(({ errorMessages }) => !isEmpty(errorMessages))\n\n  const errorComponents = errorMessages.map(({ friendlyName, errorMessages }) =>\n    errorMessages.map((message) => {\n      const content = `${friendlyName}: ${message}`\n      return (\n        <div key={content} className=\"my-0 text-right text-danger\">\n          {content}\n        </div>\n      )\n    }),\n  )\n\n  const nameHasError = errorMessages.some(({ identifier }) => identifier === 'name')\n  const transmissionReductionHasError = errorMessages.some(({ identifier }) => identifier === 'transmissionReduction')\n\n  return (\n    <div className=\"mitigation-item\">\n      <div className=\"mitigation-item-container\">\n        <div className=\"mitigation-item-datum mitigation-item-name-wrapper\">\n          <div>\n            <label htmlFor={`mitigation.mitigationIntervals[${index}].name`}>{t(`Name`)}</label>\n          </div>\n\n          <div>\n            <FastField\n              className={`form-control ${nameHasError ? 'border-danger' : ''}`}\n              id={`mitigation.mitigationIntervals[${index}].name`}\n              name={`mitigation.mitigationIntervals[${index}].name`}\n              type=\"text\"\n            />\n          </div>\n        </div>\n\n        <div className=\"mitigation-item-datum mitigation-item-time-range-wrapper\">\n          <div>\n            <label htmlFor={`mitigation.mitigationIntervals[${index}].timeRange`}>{t(`Date range`)}</label>\n          </div>\n\n          <div>\n            <MitigationDatePicker\n              identifier={`mitigation.mitigationIntervals[${index}].timeRange`}\n              value={interval.timeRange}\n              allowPast\n            />\n          </div>\n        </div>\n\n        <div className=\"mitigation-item-datum mitigation-item-efficiency-wrapper\">\n          <div>\n            <label htmlFor={`mitigation.mitigationIntervals[${index}].transmissionReduction`}>\n              {t(`Transmission reduction`)}\n            </label>\n          </div>\n\n          <div>\n            <RangeSpinBox\n              identifier={`mitigation.mitigationIntervals[${index}].transmissionReduction`}\n              step={0.1}\n              min={0}\n              max={100}\n              hasError={transmissionReductionHasError}\n            />\n          </div>\n        </div>\n\n        <div className=\"mitigation-item-datum mitigation-item-controls\">\n          <div>\n            <label htmlFor={`mitigation-interval-${index}-btn-remove`}>{t('Remove')}</label>\n          </div>\n\n          <div>\n            <Button\n              className=\"mitigation-item-btn-remove\"\n              type=\"button\"\n              id={`mitigation-interval-${index}-btn-remove`}\n              onClick={onRemove}\n            >\n              <FaTrash size={20} />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div>{errorComponents}</div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}