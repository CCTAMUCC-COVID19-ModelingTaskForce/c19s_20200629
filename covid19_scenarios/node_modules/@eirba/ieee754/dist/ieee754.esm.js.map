{"version":3,"file":"ieee754.esm.js","sources":["../src/index.ts"],"sourcesContent":["export function float64ToBigInt64(n: number): bigint {\n  const buffer = new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT);\n  const view = new DataView(buffer);\n  view.setFloat64(0, n, true);\n  return view.getBigInt64(0, true);\n}\n\nfunction signAndMagnitudeToBiased(sam: bigint): bigint {\n  if (sam < 0) {\n    return ~sam + BigInt(1);\n  }\n  return sam;\n}\n\nexport function ulpDistance(a: number, b: number): bigint {\n  /* If the numbers are the same, the diff is zero. */\n  if (a === b) {\n    return BigInt(0);\n  }\n\n  const biased1 = signAndMagnitudeToBiased(float64ToBigInt64(a));\n  const biased2 = signAndMagnitudeToBiased(float64ToBigInt64(b));\n\n  return biased1 >= biased2 ? biased1 - biased2 : biased2 - biased1;\n}\n\nexport function ulpAlmostEqual(a: number, b: number, maxULP: number): boolean {\n  if (Number.isNaN(a) || Number.isNaN(b)) {\n    return false;\n  }\n\n  return ulpDistance(a, b) <= BigInt(maxULP);\n}\n\nexport function ulpEqual(a: number, b: number): boolean {\n  if (Number.isNaN(a) || Number.isNaN(b)) {\n    return false;\n  }\n\n  return ulpDistance(a, b) === BigInt(0);\n}\n"],"names":["float64ToBigInt64","n","buffer","ArrayBuffer","Float64Array","BYTES_PER_ELEMENT","view","DataView","setFloat64","getBigInt64","signAndMagnitudeToBiased","sam","BigInt","ulpDistance","a","b","biased1","biased2","ulpAlmostEqual","maxULP","Number","isNaN","ulpEqual"],"mappings":"SAAgBA,kBAAkBC;AAChC,MAAMC,MAAM,GAAG,IAAIC,WAAJ,CAAgBC,YAAY,CAACC,iBAA7B,CAAf;AACA,MAAMC,IAAI,GAAG,IAAIC,QAAJ,CAAaL,MAAb,CAAb;AACAI,EAAAA,IAAI,CAACE,UAAL,CAAgB,CAAhB,EAAmBP,CAAnB,EAAsB,IAAtB;AACA,SAAOK,IAAI,CAACG,WAAL,CAAiB,CAAjB,EAAoB,IAApB,CAAP;AACD;;AAED,SAASC,wBAAT,CAAkCC,GAAlC;AACE,MAAIA,GAAG,GAAG,CAAV,EAAa;AACX,WAAO,CAACA,GAAD,GAAOC,MAAM,CAAC,CAAD,CAApB;AACD;;AACD,SAAOD,GAAP;AACD;;SAEeE,YAAYC,GAAWC;AACrC;AACA,MAAID,CAAC,KAAKC,CAAV,EAAa;AACX,WAAOH,MAAM,CAAC,CAAD,CAAb;AACD;;AAED,MAAMI,OAAO,GAAGN,wBAAwB,CAACV,iBAAiB,CAACc,CAAD,CAAlB,CAAxC;AACA,MAAMG,OAAO,GAAGP,wBAAwB,CAACV,iBAAiB,CAACe,CAAD,CAAlB,CAAxC;AAEA,SAAOC,OAAO,IAAIC,OAAX,GAAqBD,OAAO,GAAGC,OAA/B,GAAyCA,OAAO,GAAGD,OAA1D;AACD;SAEeE,eAAeJ,GAAWC,GAAWI;AACnD,MAAIC,MAAM,CAACC,KAAP,CAAaP,CAAb,KAAmBM,MAAM,CAACC,KAAP,CAAaN,CAAb,CAAvB,EAAwC;AACtC,WAAO,KAAP;AACD;;AAED,SAAOF,WAAW,CAACC,CAAD,EAAIC,CAAJ,CAAX,IAAqBH,MAAM,CAACO,MAAD,CAAlC;AACD;SAEeG,SAASR,GAAWC;AAClC,MAAIK,MAAM,CAACC,KAAP,CAAaP,CAAb,KAAmBM,MAAM,CAACC,KAAP,CAAaN,CAAb,CAAvB,EAAwC;AACtC,WAAO,KAAP;AACD;;AAED,SAAOF,WAAW,CAACC,CAAD,EAAIC,CAAJ,CAAX,KAAsBH,MAAM,CAAC,CAAD,CAAnC;AACD;;;;"}